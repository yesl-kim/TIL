# 실행 컨텍스트

> 정재남, <코어 자바스크립트>, 위키북스

**실행할 코드에 필요한 환경 정보들을 모아놓은 객체**

#### 실행 컨텍스트의 구성

- **VariableEnvironment**

  변경사항은 반영되지 않음
  선언 시점의 LexicalEnvironment의 스냅샷이라고 생각하면 됨

  - environmentRecord (현재 컨텍스트 내의 식별자들에 대한 정보)
  - outerEnvironmentReference (외부 환경 정보)

- **LexicalEnvironment**

  변경사항 반영

  - environmentRecord (현재 컨텍스트 내의 식별자들에 대한 정보)
  - outerEnvironmentReference (외부 환경 정보)

- **ThisBinding**
  this 식별자가 바라봐야 할 대상 객체

<br/>

처음에 현재 컨텍스트 내의 식별자들에 대한 정보 + 외부 환경 정보를 모아 `VariableEnvironment`를 생성한 후, 이를 그대로 복사하여 `LexicalEnvironment`를 만들고 이후에는 주로 `LexicalEnvironment`를 활용한다.

`VariableEnvironment`와 `LexicalEnvironment`는 현재 컨텍스트 내의 식별자들에 대한 정보가 담긴 `environmentRecord`와 외부 환경 정보가 담긴 `outerEnvironmentReference`로 구성된다.

## environmentRecord와 호이스팅

`environmentRecord` 에는 현재 컨텍스트 내의 식별자들에 대한 정보, 즉 매개변수명, 함수 내부에서 선언된 함수, var로 선언된 변수명 등이 저장된다.

이런 정보는 함수가 호출이 되면 **실행되기 전에** 자바스크립트 엔진에 의해 작서된 **순서대로** 한 데 모아 저장된다. 호이스팅(= "끌어올리는 것")이란 실제 물리적으로 식별자 정보들을 끌어올리는 것이 아니라 함수 실행 전 식별자 정보들만 먼저 저장하는 과정을 표현한 추상의 개념이라고 보면 된다.

이때 **변수는 선언부만 호이스팅하는 반면에 함수 선언문은 전체를 호이스팅**하기 때문에 함수 선언문으로 정의한 함수는 선언 전에 호출해도 오류없이 실행이 된다. **이런 점은 혼란을 일으킬 수 있기 때문에 함수 표현식으로 정의하는 것이 좋다.**
