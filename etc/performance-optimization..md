# 성능 최적화

## Intro

### 브라우저 렌더링 과정

> 파싱 -> 스타일 -> 레이아웃 -> 페인트 -> 합성

위의 과정에서 합성이 끝나면 화면에서 실제 요소들이 나타난다.

#### 파싱

- DOM 트리와 CSSOM트리를 구성하는 단계

- HTML파일 다운로드 -> 파싱(html 파일 해석)하여 DOM 트리 구성

- CSS 다운로드 -> CSSOM트리 구성

- 파싱 중 `<script>`, `<link>`, `<img>` 태그를 발견하면 각 리소스를 요청한다.

- html을 해석하여 생성된 각 DOM 객체들은 트리 구조로 연결되어 부모-자식 관계를 갖는다. (문서 구조)

  > DOM (Document Object Model)  
  구조화된 nodes와 property와 method를 갖고 있는 objects로, html 문서를 표현한다. 또한 프로그래밍 언어이 문서에 접근하여 문서 구조, 스타일, 내용 등을 변경할 수 있게 연결시켜주는 역할을 한다.  
  -> 문서의 구조와 스타일, 속성들을 객체로 표현한 것

#### 스타일

- 렌더트리를 구성하는 단계

- 파싱 단계에서 생성된 DOM트리와 CSSOM트리를 조합하여 렌더트리를 구성한다.

- 각 노드는 스타일을 참조한다.

#### 레이아웃

- 노드의 정확한 위치와 크기를 **픽셀로 계산**

- 이 때 루트부터 노드를 순회하면서 계산한다. (레이아웃을 다시 거치는 리플로우가 일어날 경우 부하가 커지는 이유!)

#### 페인트

- 엘리먼트들에 기하학적 속성(위치, 크기)를 제외한 CSS 속성을 적용되고 "레이어화"되는 단계

- 엘리먼트들은 개별 레이어로 관리된다. (모든 엘리먼트가 개별 레이어를 갖는 것은 아님.)

#### 합성 & 렌더

- 여러 계층의 레이어를 하나의 스크린을 그린다. -> 렌더!

- 이 과정 후에 스크린에서 실제 요소를 볼 수 있다.

### 주요 렌더링 경로

> **블록 리소스**  
  html이 파싱되는 도중 다른 리소스(주로 CSS, JS)인해 파싱이 중단될 수 있다. 이것을 'html 파싱이 블록되었다.'라고 하며, 그 원인이 된 리소스를 '블록 리소스'라고 한다.

- 주요 렌더링 경로, 파싱 ~ 레이아웃까지의 과정을 최적화하면 페인트를 앞당기고, 최초 페이지 렌더링에 걸리는 시간을 단축시킬 수 있다.  
  즉 성능 최적화의 첫 단계!

### 성능 측정 기준

#### 브라우저 기준

#### 사용자 기준

---

## 로딩 최적화

### 블록 리소스 최적화

- 블록 리소스에는 대표적으로 CSS, JS가 해당되는데 