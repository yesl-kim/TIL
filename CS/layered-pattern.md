# 계층화 패턴

> 소프트웨어 아키텍처 패턴

소프트웨어 아키텍처: 구조
패턴: 공식처럼 소프트웨어 아키텍처를 설계할 때 적용할 수 있는 대표적인 패턴들

소프트웨어 아키텍처의 첫번째 목적은, 소프트웨어를 쉽게 변경할 수 있는 구조로 설계해 유지보수를 쉽게 하는 것

소프트웨어의 큰 구성요소는 도메인과 인프라스트럭처로 나눌 수 있다.

- 도메인: 소프트웨어를 통해 이루고자 하는 핵심 기능 (목적)
- 인프라스트럭처: 도메인을 소프트웨어로 제공하기 위한 것들 (수단)

계층화 패턴

- 목적이 같은 코드들을 계층으로 그룹화 -> 관심사를 분리한 패턴
- 소프트웨어를 서로 연관이 있는 여러 계층으로 나눈 패턴
- 인접한 계층끼리만 소통할 수 있다.
- 관계: 하위 계층은 상위 계층에게 서비스를 제공하고, 상위 계층은 하위 계층의 서비스를 사용하는 관계이다.
- 의존성: a -> b -> c 처럼 연속된 의존성을 가질 때, a는 b를 참조한다.?

장단점
단점

- 계층끼리 **직접적**으로 참조하는 경우
  - 연쇄적인 참조 관계 -> 의존성이 높아짐 (=각 계층 간 의존성이 높아짐 = 각 계층의 변경이 다른 계층에 영향을 미침)
  - 변경 및 유지보수가 어려움
  - 테스트가 쉽지 않음 (한 계층을 테스트하기 위해 다른 계층도 필요)
  - 변경이 잦은 UI, 데이터에 의해 업무로직에도 변경이 잦게 됨 (높은 의존성으로 인해)
  - cf. 소프트웨어의 핵심 기능인 업무 로직은 잘 관리되고 보호되어야 한다 (왜?) -> 이건 잘 변하지 않나..? 그치..?

그에 반해, 클린 아키텍처는

- 하부의 세부사항들이 안쪽의 고수준 정책을 **단방향**으로 참조해야한다.
- 그래야 외부에서 변경이 일어나도 내부의 고수준 정책은 영향을 받지 않는다.
- 계층간의 소통은 인터페이스를 통하고, 각 계층간 데이터를 알맞은 형태로 변환해주는 어댑터 추가

의존성 역전

- 각 계층을 독립적으로 테스트 가능
- 인터페이스만 동일하다면 변경도 쉽다
- 세부사항에 도메인이 영향을 받지 않는다.

헥사고날 아키텍처

아키텍처가 무엇을 보호하고 무엇에 집중해야하나 - 도메인과 업무 정책

적용 사례?
주요 구성요소

- 프레젠테이션: UI 및 UI 로직 담당
- 도메인: 핵심 기능 및 비즈니스 로직 담당
- 영속성: DB, OS
